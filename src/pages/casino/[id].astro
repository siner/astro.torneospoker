---
import Layout from "../../layouts/Layout.astro";
const id = Astro.params.id;
import {
  getCasino,
  getProximosTorneosCasino,
  getAllCasinos,
} from "../../lib/api";
let casino = await getCasino(id);
let torneos = await getProximosTorneosCasino(id);

export async function getStaticPaths() {
  let casinos = await getAllCasinos();
  return casinos.map((cas) => {
    return {
      params: { id: cas.id.toString() },
    };
  });
}
---

<Layout title={casino.name}>
  <div class="flex flex-col p-10">
    <div class="mb-5 text-4xl font-bold">{casino.name}</div>
    <div class="text-base text-grey-darker">
      <article class="prose lg:prose-xl">
        {casino.address}
        <h2>Pr√≥ximos Torneos</h2>
        <ul>
          {
            torneos.map((torneo) => (
              <li>
                <a href={"/torneo/" + torneo.id}>
                  {torneo.name} - {torneo.date} - {torneo.hour}
                </a>
              </li>
            ))
          }
        </ul>
      </article>
    </div>
  </div>
</Layout>
